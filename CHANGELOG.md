# 更新日志

本文档记录了 WeChat Cleaner 项目的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [Semantic Versioning](https://semver.org/lang/zh-CN/)。

## [未发布]

### 计划中
- 图形用户界面 (GUI)
- Windows 系统支持
- 云端配置同步
- 插件系统支持

## [0.1.0] - 2025-08-28

### 新增
- 🚀 核心扫描功能：基于文件哈希的重复文件检测
- 🔍 智能清理系统：预览-确认-执行的安全清理流程
- 📊 详细统计显示：文件数量、释放空间、操作耗时
- ⚙️ 灵活配置管理：支持自定义路径和清理规则
- 🎨 统一显示特性：模块化的显示系统
- 📱 命令行界面：完整的 CLI 工具

### 功能特性
- **扫描模块 (Scanner)**
  - 递归目录扫描
  - 并行文件哈希计算
  - 基于正则表达式的文件过滤
  - 扫描结果序列化存储

- **清理模块 (Cleaner)**
  - 预览清理操作
  - 交互式确认机制
  - 安全的文件删除
  - 详细的清理统计

- **配置系统 (Config)**
  - TOML 格式配置文件
  - 多层级配置合并
  - 环境变量支持
  - 自动路径检测

- **显示系统 (Display)**
  - 统一的显示接口
  - 摘要和详细显示模式
  - 自定义字段格式化
  - 过程宏自动生成

- **CLI 界面**
  - `scan` 命令：扫描重复文件
  - `clean` 命令：清理重复文件（包含预览）
  - `config` 命令：显示配置信息
  - 实时进度显示
  - 颜色和格式化输出

### 技术架构
- **语言**: Rust 2024 Edition
- **架构**: Workspace + 模块化设计
- **并发**: rayon 并行计算框架
- **CLI**: clap 命令行解析
- **配置**: serde + toml 配置系统
- **进度**: indicatif 进度条显示

### 性能优化
- 🚀 并行文件哈希计算
- 📦 分层处理逻辑：大小 → 模式 → 哈希
- 💾 8KB 缓冲区优化文件读取
- 🔄 增量式处理避免大内存占用

### 安全特性
- 🛡️ 预览确认机制防止误删
- 🔒 文件权限检查和设置
- ⚠️ 详细的错误信息和处理
- 🚨 最小文件大小阈值保护

### 文档完善
- 📖 完整的项目 README
- 📚 详细的模块文档
- 🔧 开发和贡献指南
- 📝 API 文档和使用示例

### 代码质量
- ✅ 全面的单元测试覆盖
- 🔍 静态代码检查 (clippy)
- 📐 代码格式化 (rustfmt)
- 🏗️ 结构化错误处理 (thiserror)

### 已知限制
- 仅支持 macOS 和 Linux 系统
- 需要手动配置微信缓存路径
- 暂无图形界面

## 版本历史

### 开发过程

#### Phase 1: 核心功能开发
- 实现基础扫描和清理功能
- 建立项目架构和模块设计
- 添加配置管理系统

#### Phase 2: 显示特性集成
- 设计统一的显示系统
- 实现过程宏自动生成
- 优化用户交互体验

#### Phase 3: CLI 界面完善
- 构建完整的命令行工具
- 添加进度显示和错误处理
- 实现预览-确认工作流程

#### Phase 4: 代码重构和优化
- 简化模块设计，降低复杂度
- 优化性能和内存使用
- 完善文档和测试覆盖

#### Phase 5: 项目整合
- 统一各模块接口
- 修复集成问题
- 完善项目文档

## 贡献者

- **skitta** - 项目创建者和主要维护者

## 许可证变更

- [0.1.0] 采用 MIT OR Apache-2.0 双许可证

---

**说明**：
- 🚀 新功能
- 🔧 改进
- 🐛 修复
- 📚 文档
- ⚡ 性能
- 🔒 安全