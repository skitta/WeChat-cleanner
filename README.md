# WeChat Cleaner

[![Rust](https://img.shields.io/badge/rust-1.80%2B-brightgreen.svg)](https://www.rust-lang.org)
[![License: MIT OR Apache-2.0](https://img.shields.io/badge/License-MIT%20OR%20Apache--2.0-blue.svg)](LICENSE)
[![Build Status](https://img.shields.io/badge/build-passing-brightgreen.svg)](https://github.com/skitta/wechat-cleaner)

ä¸€ä¸ªç”¨ Rust å¼€å‘çš„å¾®ä¿¡ç¼“å­˜æ¸…ç†å·¥å…·ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿè¯†åˆ«å’Œæ¸…ç†é‡å¤çš„å¾®ä¿¡ç¼“å­˜æ–‡ä»¶ï¼Œé‡Šæ”¾æœ¬åœ°ç£ç›˜ç©ºé—´ã€‚

## âœ¨ ç‰¹æ€§

- ğŸš€ **é«˜æ€§èƒ½æ‰«æ**ï¼šåŸºäºå¹¶è¡Œè®¡ç®—ï¼Œå¿«é€Ÿæ‰«æå¤§é‡ç¼“å­˜æ–‡ä»¶
- ğŸ” **æ™ºèƒ½è¯†åˆ«**ï¼šåŸºäºæ–‡ä»¶å†…å®¹å“ˆå¸Œæ£€æµ‹é‡å¤æ–‡ä»¶
- ğŸ‘€ **é¢„è§ˆåŠŸèƒ½**ï¼šæ¸…ç†å‰æ˜¾ç¤ºè¯¦ç»†é¢„è§ˆï¼Œç¡®ä¿æ“ä½œå®‰å…¨
- ğŸ›¡ï¸ **å®‰å…¨æ¸…ç†**ï¼šäº¤äº’å¼ç¡®è®¤æœºåˆ¶ï¼Œé¿å…è¯¯åˆ é‡è¦æ–‡ä»¶
- ğŸ“Š **è¯¦ç»†ç»Ÿè®¡**ï¼šæä¾›æ¸…ç†å‰åçš„è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯
- âš™ï¸ **é…ç½®çµæ´»**ï¼šæ”¯æŒè‡ªå®šä¹‰æ¸…ç†è§„åˆ™å’Œè·¯å¾„é…ç½®
- ğŸ¨ **å‹å¥½ç•Œé¢**ï¼šæ¸…æ™°çš„å‘½ä»¤è¡Œç•Œé¢å’Œå®æ—¶è¿›åº¦æ˜¾ç¤º

## ğŸ› ï¸ å®‰è£…

### å‰ç½®è¦æ±‚

- Rust 1.80 æˆ–æ›´é«˜ç‰ˆæœ¬
- macOS æˆ– Linux ç³»ç»Ÿï¼ˆæš‚ä¸æ”¯æŒ Windowsï¼‰

### ä»æºç æ„å»º

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/skitta/wechat-cleaner.git
cd wechat-cleaner

# æ„å»ºé¡¹ç›®
cargo build --release

# è¿è¡Œ
./target/release/wechat-cleaner --help
```

### å¼€å‘æ„å»º

```bash
# å¿«é€Ÿå¼€å‘æ„å»º
cargo build

# è¿è¡Œï¼ˆå¼€å‘æ¨¡å¼ï¼‰
cargo run --bin wechat-cleaner -- --help
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ä½¿ç”¨æµç¨‹

1. **æ‰«æé‡å¤æ–‡ä»¶**
   ```bash
   wechat-cleaner scan
   ```

2. **é¢„è§ˆå¹¶æ¸…ç†**
   ```bash
   wechat-cleaner clean
   ```

3. **æŸ¥çœ‹é…ç½®**
   ```bash
   wechat-cleaner config
   ```

### å®Œæ•´ä½¿ç”¨ç¤ºä¾‹

```bash
# 1. æ‰«æå¾®ä¿¡ç¼“å­˜ä¸­çš„é‡å¤æ–‡ä»¶
$ wechat-cleaner scan
â ‹ æ­£åœ¨æ‰«æå¾®ä¿¡ç¼“å­˜æ–‡ä»¶...
æ€»æ–‡ä»¶æ•°: 1,234
é‡å¤æ–‡ä»¶æ•°: 89
æ‰«æè€—æ—¶: 2.34s
æ‰«æç»“æœå·²ä¿å­˜åˆ°: /tmp/scan_result.json

# 2. æ¸…ç†é‡å¤æ–‡ä»¶ï¼ˆåŒ…å«é¢„è§ˆå’Œç¡®è®¤ï¼‰
$ wechat-cleaner clean --verbose
â ‹ æ­£åœ¨ç”Ÿæˆé¢„è§ˆ...
é¢„è®¡åˆ é™¤æ–‡ä»¶æ•°: 67
é¢„è®¡é‡Šæ”¾ç©ºé—´: 45.2 MB
æ–‡ä»¶åˆ†ç»„è¯¦æƒ…:
  æ–‡ä»¶å¤¹: /Users/xxx/Library/Caches/WeChat/...
    ä¿ç•™æ–‡ä»¶: image_001.jpg
    åˆ é™¤æ–‡ä»¶åˆ—è¡¨: 3ä¸ªæ–‡ä»¶

æ˜¯å¦ç»§ç»­? (y/n): y

â ‹ æ­£åœ¨æ¸…ç†é‡å¤æ–‡ä»¶...
åˆ é™¤æ–‡ä»¶æ•°: 67
é‡Šæ”¾ç©ºé—´: 45.2 MB
æ¸…ç†è€—æ—¶: 1.23s

# 3. æŸ¥çœ‹å½“å‰é…ç½®
$ wechat-cleaner config
å½“å‰é…ç½®:
  å¾®ä¿¡ç¼“å­˜è·¯å¾„: Some("/Users/xxx/Library/Caches/WeChat")
  é»˜è®¤æ¸…ç†æ¨¡å¼: Auto
  æœ€å°æ–‡ä»¶å¤§å°: 1024 å­—èŠ‚
```

## ğŸ“š å‘½ä»¤å‚è€ƒ

### scan - æ‰«æé‡å¤æ–‡ä»¶

```bash
wechat-cleaner scan [OPTIONS]

é€‰é¡¹:
  -v, --verbose    æ˜¾ç¤ºè¯¦ç»†æ‰«æä¿¡æ¯
  -h, --help       æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

### clean - æ¸…ç†é‡å¤æ–‡ä»¶

```bash
wechat-cleaner clean [OPTIONS]

é€‰é¡¹:
  -m, --mode <MODE>    æ¸…ç†æ¨¡å¼: auto [é»˜è®¤: auto]
  -v, --verbose        æ˜¾ç¤ºè¯¦ç»†æ¸…ç†ä¿¡æ¯
  -h, --help          æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

### config - æ˜¾ç¤ºé…ç½®ä¿¡æ¯

```bash
wechat-cleaner config

æ˜¾ç¤ºå½“å‰çš„é…ç½®è®¾ç½®ï¼ŒåŒ…æ‹¬å¾®ä¿¡ç¼“å­˜è·¯å¾„ã€æ¸…ç†è§„åˆ™ç­‰ã€‚
```

## âš™ï¸ é…ç½®

é¡¹ç›®ä½¿ç”¨ `default.toml` é…ç½®æ–‡ä»¶ï¼Œæ”¯æŒè‡ªå®šä¹‰ä»¥ä¸‹è®¾ç½®ï¼š

```toml
[wechat]
# å¾®ä¿¡ç¼“å­˜ç›®å½•è·¯å¾„ï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰
cache_path = "/Users/username/Library/Caches/WeChat"
# ç¼“å­˜æ–‡ä»¶åŒ¹é…æ¨¡å¼
cache_patterns = ".*\\.(jpg|jpeg|png|gif|bmp|webp|mp4|mov|avi|mkv|log|tmp)$"

[cleaning]
# é»˜è®¤æ¸…ç†æ¨¡å¼
default_mode = "Auto"
# æœ€å°æ–‡ä»¶å¤§å°é˜ˆå€¼ï¼ˆå­—èŠ‚ï¼‰
min_file_size = 1024
# æ˜¯å¦ä¿ç•™åŸå§‹æ–‡ä»¶
preserve_originals = false
```

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
wechat-cleaner/
â”œâ”€â”€ core/              # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ scanner.rs     # æ–‡ä»¶æ‰«ææ¨¡å—
â”‚   â”œâ”€â”€ cleaner.rs     # æ–‡ä»¶æ¸…ç†æ¨¡å—
â”‚   â”œâ”€â”€ config/        # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ ...
â”œâ”€â”€ cli/               # å‘½ä»¤è¡Œç•Œé¢
â”œâ”€â”€ display_core/      # æ˜¾ç¤ºç‰¹æ€§æ ¸å¿ƒåº“
â”œâ”€â”€ display_derive/    # æ˜¾ç¤ºç‰¹æ€§å®åº“
â””â”€â”€ docs/             # é¡¹ç›®æ–‡æ¡£
```

### æ ¸å¿ƒæ¨¡å—

- **Scanner**: é€’å½’æ‰«æç›®å½•ï¼ŒåŸºäºå“ˆå¸Œæ£€æµ‹é‡å¤æ–‡ä»¶
- **Cleaner**: æä¾›é¢„è§ˆå’Œå®‰å…¨æ¸…ç†åŠŸèƒ½
- **Config**: çµæ´»çš„é…ç½®ç®¡ç†ç³»ç»Ÿ
- **Display**: ç»Ÿä¸€çš„æ˜¾ç¤ºç‰¹æ€§ç³»ç»Ÿ

### è®¾è®¡åŸåˆ™

- ğŸ¯ **å•ä¸€èŒè´£**: æ¯ä¸ªæ¨¡å—ä¸“æ³¨ç‰¹å®šåŠŸèƒ½
- ğŸ”„ **æ¨¡å—åŒ–**: æ¸…æ™°çš„æ¨¡å—è¾¹ç•Œå’Œæ¥å£
- ğŸ›¡ï¸ **å®‰å…¨ç¬¬ä¸€**: é¢„è§ˆç¡®è®¤æœºåˆ¶é˜²æ­¢è¯¯æ“ä½œ
- âš¡ **æ€§èƒ½ä¼˜åŒ–**: å¹¶è¡Œè®¡ç®—å’Œæ™ºèƒ½ç¼“å­˜

## ğŸ§ª å¼€å‘æŒ‡å—

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å®‰è£… Rust å·¥å…·é“¾
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# å…‹éš†é¡¹ç›®
git clone https://github.com/skitta/wechat-cleaner.git
cd wechat-cleaner

# å®‰è£…ä¾èµ–å¹¶æ„å»º
cargo build
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test

# è¿è¡Œç‰¹å®šæ¨¡å—æµ‹è¯•
cargo test -p core

# è¿è¡ŒåŸºå‡†æµ‹è¯•
cargo bench
```

### ä»£ç æ£€æŸ¥

```bash
# ä»£ç æ ¼å¼åŒ–
cargo fmt

# é™æ€æ£€æŸ¥
cargo clippy

# æ£€æŸ¥æ‰€æœ‰åŒ…
cargo check --workspace
```

### æ„å»ºé…ç½®

é¡¹ç›®æä¾›å¤šç§æ„å»ºé…ç½®ï¼š

```bash
# å¼€å‘æ„å»ºï¼ˆå¿«é€Ÿç¼–è¯‘ï¼‰
cargo build

# å‘å¸ƒæ„å»ºï¼ˆä¼˜åŒ–æ€§èƒ½ï¼‰
cargo build --release

# ç”Ÿäº§æ„å»ºï¼ˆæœ€å¤§ä¼˜åŒ–ï¼‰
cargo build --profile dist
```

## ğŸ“– æ–‡æ¡£

è¯¦ç»†æ–‡æ¡£ä½äº [docs/](./docs/) ç›®å½•ï¼š

- [é¡¹ç›®æ•´åˆæ€»ç»“](./docs/project-integration-summary.md)
- [æ˜¾ç¤ºç‰¹æ€§é›†æˆæŒ‡å—](./docs/DISPLAY_FEATURE.md)
- [æ¸…ç†åŠŸèƒ½é‡æ„æ–‡æ¡£](./docs/CLEANER_REFACTOR.md)
- [CLI ä¿®å¤æ€»ç»“](./docs/cli-fix-summary.md)

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. **Fork** æœ¬ä»“åº“
2. **åˆ›å»º** ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. **æäº¤** æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. **æ¨é€** åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. **åˆ›å»º** Pull Request

### è´¡çŒ®è§„èŒƒ

- éµå¾ª Rust å®˜æ–¹ç¼–ç è§„èŒƒ
- ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
- æ·»åŠ é€‚å½“çš„æ–‡æ¡£å’Œæ³¨é‡Š
- ä¿æŒæäº¤ä¿¡æ¯æ¸…æ™°æ˜ç¡®

## ğŸ› é—®é¢˜åé¦ˆ

å¦‚æœä½ å‘ç°äº† bug æˆ–æœ‰åŠŸèƒ½å»ºè®®ï¼Œè¯·åœ¨ [Issues](https://github.com/skitta/wechat-cleaner/issues) é¡µé¢æäº¤ã€‚

æäº¤é—®é¢˜æ—¶è¯·åŒ…å«ï¼š
- æ“ä½œç³»ç»Ÿç‰ˆæœ¬
- Rust ç‰ˆæœ¬
- é”™è¯¯ä¿¡æ¯æˆ–æ—¥å¿—
- å¤ç°æ­¥éª¤

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT æˆ– Apache-2.0 åŒè®¸å¯è¯ã€‚è¯¦è§ï¼š

- [MIT License](LICENSE-MIT)
- [Apache License 2.0](LICENSE-APACHE)

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®çš„æ”¯æŒï¼š

- [Rust](https://www.rust-lang.org/) - ç³»ç»Ÿç¼–ç¨‹è¯­è¨€
- [clap](https://github.com/clap-rs/clap) - å‘½ä»¤è¡Œå‚æ•°è§£æ
- [rayon](https://github.com/rayon-rs/rayon) - å¹¶è¡Œè®¡ç®—æ¡†æ¶
- [serde](https://github.com/serde-rs/serde) - åºåˆ—åŒ–æ¡†æ¶

## ğŸ“Š é¡¹ç›®çŠ¶æ€

- âœ… æ ¸å¿ƒæ‰«æåŠŸèƒ½
- âœ… å®‰å…¨æ¸…ç†æœºåˆ¶
- âœ… é¢„è§ˆç¡®è®¤åŠŸèƒ½
- âœ… é…ç½®ç®¡ç†ç³»ç»Ÿ
- âœ… æ˜¾ç¤ºç‰¹æ€§ç³»ç»Ÿ
- âœ… å®Œæ•´çš„ CLI ç•Œé¢
- ğŸ”„ å›¾å½¢ç•Œé¢ï¼ˆè®¡åˆ’ä¸­ï¼‰
- ğŸ”„ Windows æ”¯æŒï¼ˆè®¡åˆ’ä¸­ï¼‰

---

<div align="center">

**[â¬† å›åˆ°é¡¶éƒ¨](#wechat-cleaner)**

Made with â¤ï¸ by [skitta](https://github.com/skitta)

</div>